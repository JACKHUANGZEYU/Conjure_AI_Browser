<Window x:Class="ConjureBrowser.App.Dialogs.ImportChromeDataWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Import from Chrome"
        Width="450" Height="430"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#1E1E1E">
    
    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="#E0E0E0"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="#E0E0E0"/>
        </Style>
    </Window.Resources>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Import Data from Google Chrome"
                   FontSize="16" 
                   FontWeight="SemiBold"
                   Margin="0,0,0,16"/>

        <!-- Profile Selection -->
        <StackPanel Grid.Row="1" Margin="0,0,0,16">
            <TextBlock Text="Select Chrome Profile:" Margin="0,0,0,6"/>
            <ComboBox x:Name="ProfileComboBox"
                      Height="32"
                      Padding="8,4"
                      SelectionChanged="ProfileComboBox_SelectionChanged"/>
        </StackPanel>

        <!-- Import Options -->
        <StackPanel Grid.Row="2" Margin="0,0,0,16">
            <TextBlock Text="What to import:" Margin="0,0,0,8"/>
            <CheckBox x:Name="ImportBookmarksCheckBox"
                      Content="Bookmarks"
                      IsChecked="True"
                      Margin="0,4"/>
            <CheckBox x:Name="ImportHistoryCheckBox"
                      Content="Browsing History"
                      IsChecked="True"
                      Margin="0,4"/>
            <CheckBox x:Name="ImportPasswordsCheckBox"
                      Content="Saved Passwords (Autofill Logins)"
                      IsChecked="True"
                      Margin="0,4"/>
            <CheckBox x:Name="ImportPasskeysCheckBox"
                      Content="Passkeys / WebAuthn (not supported yet)"
                      IsEnabled="False"
                      Margin="0,4"
                      Opacity="0.6"/>
            <TextBlock Text="Note: Passkeys are stored in Windows/TPM and can’t be imported automatically yet."
                       FontSize="11"
                       Opacity="0.6"
                       TextWrapping="Wrap"
                       Margin="20,2,0,0"/>
        </StackPanel>

        <!-- Profile Info -->
        <Border Grid.Row="3" 
                Background="#2D2D2D" 
                CornerRadius="4" 
                Padding="12"
                Margin="0,0,0,16">
            <StackPanel>
                <TextBlock x:Name="ProfileInfoText"
                           Text="Select a profile to see available data."
                           TextWrapping="Wrap"
                           Opacity="0.7"/>
            </StackPanel>
        </Border>

        <!-- Progress -->
        <StackPanel Grid.Row="4" x:Name="ProgressPanel" Visibility="Collapsed">
            <TextBlock x:Name="ProgressText" Text="Importing..." Margin="0,0,0,8"/>
            <ProgressBar x:Name="ProgressBar" 
                         Height="6" 
                         IsIndeterminate="False"
                         Value="0"
                         Maximum="100"
                         Foreground="#4CAF50"/>
        </StackPanel>

        <!-- Results -->
        <Border Grid.Row="5" 
                x:Name="ResultsPanel"
                Visibility="Collapsed"
                Background="#1B3B1B" 
                CornerRadius="4" 
                Padding="12"
                Margin="0,8,0,0">
            <TextBlock x:Name="ResultsText"
                       TextWrapping="Wrap"
                       Foreground="#81C784"/>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="6" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button x:Name="ImportButton"
                    Content="Import"
                    Width="100"
                    Height="32"
                    Margin="0,0,8,0"
                    Click="ImportButton_Click"
                    Background="#4CAF50"
                    Foreground="White"
                    BorderThickness="0"/>
            <Button x:Name="CloseButton"
                    Content="Close"
                    Width="80"
                    Height="32"
                    Click="CloseButton_Click"
                    Background="#424242"
                    Foreground="White"
                    BorderThickness="0"/>
        </StackPanel>

        <!-- No Chrome Message -->
        <Border Grid.Row="1" Grid.RowSpan="5"
                x:Name="NoChromePanel"
                Visibility="Collapsed"
                Background="#3B2D1B"
                CornerRadius="4"
                Padding="16"
                VerticalAlignment="Center">
            <StackPanel>
                <TextBlock Text="⚠️ Chrome Not Found"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="#FFB74D"
                           Margin="0,0,0,8"/>
                <TextBlock Text="Google Chrome does not appear to be installed on this computer, or no profiles with importable data were found."
                           TextWrapping="Wrap"
                           Foreground="#E0E0E0"
                           Opacity="0.8"/>
                <TextBlock Text="Expected location:"
                           Margin="0,12,0,4"
                           Opacity="0.6"/>
                <TextBlock x:Name="ChromePathText"
                           Text="%LOCALAPPDATA%\Google\Chrome\User Data\"
                           FontFamily="Consolas"
                           FontSize="11"
                           Opacity="0.6"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
